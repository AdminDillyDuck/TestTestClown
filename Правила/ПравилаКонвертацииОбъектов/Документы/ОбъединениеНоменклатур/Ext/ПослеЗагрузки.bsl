Если Объект.Проведен Тогда
	Объект.Товары.Очистить();
	Объект.ЗаполнитьПоОстаткамНаСкладе();
КонецЕсли;	

Если НЕ ЗначениеЗаполнено(Объект.Ссылка) И Объект.Товары.Количество() = 0 Тогда
	Отказ = Истина;	
Иначе
	Объект.СчетУчета     = БухгалтерскийУчетПереопределяемый.ПолучитьСчетаУчетаНоменклатуры(Объект.Организация, Объект.НоваяНоменклатура, ?(Объект.Товары.Количество()>0, Объект.Товары[0].Склад, Неопределено)).СчетУчета;
	Выполнить(Алгоритмы.ПровестиДокумент);	
КонецЕсли;